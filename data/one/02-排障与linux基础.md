## 1.日常工作总结

### 1.1前一天的工作内容

- linux发型版本与版本号
- 工作环境:
  - 物理机
  - 虚拟机(虚拟化，私有云，都是在本地物理服务器创建)
  - 公有云服务器(云厂商，阿里云等...)
- 创建虚拟机和安装linux系统
- 排查解决安装虚拟机过程中出现的故障(远程连接失败或安装失败再或vmware安装错误)，详情解决方法可以看昨日笔记



### 1.2 今日内容介绍

- 第二天
- 掌握linux排障使用的命令
- linux基本规则制度
- linux命令
- 安装ubuntu，rocky

## 2.Linux排障核心流程

> 以远程连接失败为例

### 2.1 提前准备

#### 2.1.1 IP地址

- ip地址相当于人的家庭住址

- ip地址分类：，公网ip

- | 分类     | 区别作用                                                     | ip分类                                    |
  | -------- | ------------------------------------------------------------ | ----------------------------------------- |
  | 局域网ip | 私有网络，只能在本机的当前环境或一个区域内使用（比如公司内部） | 192.168.xx.xx，172.16.xxx.xxx，10.0.0.xxx |
  | 公网ip   | 不容易获取和固定，拥有公网ip的设备应用可以在任何地方和环境访问，国外不包括（需要爬梯子科学上网） |                                           |

- 如何区分局域网ip和公网ip：网站www.ip138.com



- 查询linux系统的ip地址

```bash
ip a
ip address
```

#### 2.1.2 端口



- port端口
- 端口在计算机中用于区分不同的服务的
- 端口用于给用户提供访问的

| 常见服务     | 功能                                              | 默认端口 |
| ------------ | ------------------------------------------------- | -------- |
| 远程连接服务 | 让运维人员可以远程连接控制Linux系统               | 22       |
| 网站服务     | 就是web网页的`http`协议，提供给用户，访问网站/App | 80       |
|              | `https`协议，它与http类似，但是加密的             | 443      |





![image-20250424090053958](assets\image-20250424090053958.png)

#### 2.1.3 协议

- 双方共同遵守的内容

### 2.2 故障排错流程

当因为网络发生故障时需要在电脑本地终端或远程工具使用命令排查

![image-20250424091520990](assets\image-20250424091520990.png)

#### 2.2.1 ping命令

| 命令   | 说明                                      |      |
| ------ | ----------------------------------------- | ---- |
| ping   | 检查网络连接是否畅通                      |      |
| telnet | ip+端口是否可以访问(日常说的端口是否畅通) |      |

windows+r打开`运行`窗口，随后输入`cmd`打开终端

```bash
Windows PowerShell
版权所有（C） Microsoft Corporation。保留所有权利。

安装最新的 PowerShell，了解新功能和改进！https://aka.ms/PSWindows

PS C:\Users\admin> ping 10.0.0.200	#在终端输入ping空格+ip

正在 Ping 10.0.0.200 具有 32 字节的数据:
来自 10.0.0.200 的回复: 字节=32 时间<1ms TTL=64
来自 10.0.0.200 的回复: 字节=32 时间<1ms TTL=64
来自 10.0.0.200 的回复: 字节=32 时间=1ms TTL=64
来自 10.0.0.200 的回复: 字节=32 时间=2ms TTL=64

10.0.0.200 的 Ping 统计信息:
    数据包: 已发送 = 4，已接收 = 4，丢失 = 0 (0% 丢失)，
往返行程的估计时间(以毫秒为单位):
    最短 = 0ms，最长 = 2ms，平均 = 0ms
PS C:\Users\admin>
```

可以在ping测试过程中使用`ctrl+c`取消停止

```bash
PS C:\Users\admin> ping baidu.com

正在 Ping baidu.com [39.156.66.10] 具有 32 字节的数据:
来自 39.156.66.10 的回复: 字节=32 时间=62ms TTL=50
来自 39.156.66.10 的回复: 字节=32 时间=138ms TTL=50

39.156.66.10 的 Ping 统计信息:
    数据包: 已发送 = 2，已接收 = 2，丢失 = 0 (0% 丢失)，
往返行程的估计时间(以毫秒为单位):
    最短 = 62ms，最长 = 138ms，平均 = 100ms
Control-C
PS C:\Users\admin>
```

#### 2.2.2 telnet

##### 2.2.2.1 打开终端方式

- `win+r`键入`powershell`

![image-20250424101415818](assets\image-20250424101415818.png)

- `win+x`选择终端管理员

![image-20250424101347904](assets\image-20250424101347904.png)

##### 2.2.2.2 命令操作

```bash
# telnet ip地址 端口
telnet 10.0.0.200 22    
# 返回如下
SSH-2.0-OpenSSH_8.2 
```

##### 2.2.2.3 返回结果

连接成功

![image-20250424102637097](assets\image-20250424102637097.png)

连接失败:

- ip地址不正确或找不到，也可能被墙了

![image-20250424102724263](assets\image-20250424102724263.png)

- 遭到决绝，就是被墙了，我的IP地址无法访问它的IP地址，被策略限制了

  ![image-20250424102813942](assets\image-20250424102813942.png)

##### 2.2.2.3 telnet命令报错解决

win+r键入control--->程序--->开启或关闭windows功能--->重启windows

![image-20250424101716995](assets\image-20250424101716995.png)



## 3.Linux规章制度



### 3.1 linux组成

底层关系：计算机硬件--->系统内核--->命令解释器shell--->应用程序

![image-20250424103911746](assets\image-20250424103911746.png)

### 3.2 命令行

#### 3.2.1 头部的组成

基本信息顺序：用户名--->主机名--->当前所在位置的目录--->用户类型（#为root，$为普通用户）

![image-20250424104454767](assets\image-20250424104454767.png)

### 3.3 命令格式

- 文件：文档，视频，xxx，txt等等。。。
- 目录：文件夹 内部可以包含很多内容，用于分类（比如文件，内部还可以放文件夹或其他类型所有数据）





### 3.4 目录

#### 3.4.1 什么是目录

linux目录的特点：倒挂树形结构，一切从根开始

![image-20250424111915312](assets\image-20250424111915312.png)

#### 3.4.2 常用目录

| 名称                | 作用                                                         |
| ------------------- | ------------------------------------------------------------ |
| /etc/               | 系统配置文件,服务配置                                        |
| /home/       /root/ | 家目录:<br />root用户的家目录/root/<br />普通用户：例如test用户 /home/test |
| /tmp/               | 临时存放不重要的内容<br />麒麟/欧拉,这个目录空间大小受限     |
| /bin-> usr/bin      | bin binary二进制文件,存放命令<br />/sbin/s super 超级命令,root使用 |
| /boot/              | 存放系统的引导文件和linux内核文件，作用于系统的启动运行      |
| /dev/               | device 硬件设备等等的文件目录                                |
| /proc/ /sys/        | 进程/内存/内核的信息                                         |
| /var/               | 变化的内容,例如日志log                                       |
|                     |                                                              |
|                     |                                                              |

![image-20250424113737000](assets\image-20250424113737000.png)

默认情况下 `/tmp` 的文件会被自动清理，大多数现代 Linux 发行版（如 Rocky Linux、RHEL、Ubuntu），`systemd-tmpfiles` 服务 会定期清理 `/tmp`。文件如果 **10 天未访问**（atime），则会被删除。目录如果 **30 天未访问**，则会被删除。麒麟欧拉的目录空间大小受限



### 3.5 绝对路径vs相对路径

- **绝对路径**：从根开始的路径，不容易丢

- **相对路径**：不是从根开始的路径，相当于当前目录



## 4.命令

### 4.1 基本概念

通过命令控制，管理查看linux，这次掌握基本命令，可以对linux系统文件和目录进行增删改查！



### 4.2 增加类操作

#### 4.2.1 目录操作

| 命令名称                     | 详细命令指令   | 含义                                                         |
| ---------------------------- | -------------- | ------------------------------------------------------------ |
| **mkdir === make directory** | mkdir 目录     | 创建目录操作                                                 |
|                              | mkdir -p       | 一次创建多层目录                                             |
|                              | cd             |                                                              |
| **touch操作**                | touch 文件名称 | 创建操作，例如t1.txt或test.yaml                              |
|                              |                |                                                              |
| 查看操作                     | ls             | 列出目录下的信息                                             |
|                              | ll             | 列出目录信息的同时展示其中所有数据的详细信息,                |
|                              | ll -a          | 查看隐藏文件                                                 |
|                              | ll -t          | 查看创建时间                                                 |
|                              | ll -h          | -h将文件大小自动转换为 **KB、MB、GB** 等易读单位             |
|                              | ll -r          | 逆序查看，可以集合-t一起使用 ll -rt 、test<br />![image-20250424151649358](assets\image-20250424151649358.png) |



```bash
mkdir /test	#创建目录

mkdir -p /test/file1/file2	#创建多层包含的目录

#查看
ls test/
ll /test # ls -l与它一致的作用
ll -a # 可以查看隐藏文件
```

#### 4.2.2 文件操作

`touch`文件操作

```bash
root@fz:~# touch test/t2.txt
root@fz:~# ll test/
总用量 0
-rw-r--r-- 1 root root 0  4月 24 15:03 t2.txt
-rw-r--r-- 1 root root 0  4月 24 11:57 test2.txt
```



### 4.3 文件查看指令

**文件操作`cd（change directory ）`**

| 名称                    | 命令运用         | 含义                                                         |
| ----------------------- | ---------------- | ------------------------------------------------------------ |
| cd === change directory | cd 目录          | 改变目录，进入到指定目录                                     |
|                         | cd ~或cd         | 返回到家目录                                                 |
|                         | cd  ..或cd ../.. | 返回上级目录和返回上上级目录，可以反斜杠一直加，但最后只能到根目录下 |
| pwd                     | pwd              | 查看当前所在位置                                             |
|                         |                  |                                                              |

实操：

```sh
# 进入目录
cd /etc/sysconfig/network-scripts/

# 返回家目录
cd ~

# 返回上一级目录
cd ..

# 查看所在位置
pwd
# /etc/sysconfig

# 返回上上级目录
cd ../..
pwd
#/etc

#返回上次访问的目录
root@fz:/etc/sysconfig/network-scripts# cd /tmp/
root@fz:/tmp# cd -
/etc/sysconfig/network-scripts
root@fz:/etc/sysconfig/network-scripts# ls
ifcfg-ens33
```

### 4.4 删除操作

**`rm（remove）`删除文件或目录**

| 命令                    | 说明                                         |
| ----------------------- | -------------------------------------------- |
| rm 文件 或者 rm -f 文件 | 删除文件，-f 表现无需确认直接删除            |
| rm -rf 目录             | 删除目录必须加-r ，-rf表示直接删除不需要确认 |

```bash
# 创建目录和文件
mkdir test
touch t1.txt
# 删除目录
rm -rf test/
# 删除文件
rm t1.txt
```

## 5.ubuntu/rocky安装

![image-20250424163450172](assets\image-20250424163450172.png)

在设置IPV4前关闭网络连接,把已连接的√去掉
![image-20250424165357212](assets\image-20250424165357212.png)

这一步之前关闭网络连接,在虚机的设置中把已连接取消,光标调整到ens33上选择手动更改ip配置,配置完安装时把网络打开

![image-20250424163622132](assets\image-20250424163622132.png)



